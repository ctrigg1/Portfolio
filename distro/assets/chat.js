!function(n){var r={};function e(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return n[t].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=n,e.c=r,e.d=function(n,r,t){e.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:t})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,r){if(1&r&&(n=e(n)),8&r)return n;if(4&r&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(e.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&r&&"string"!=typeof n)for(var o in n)e.d(t,o,function(r){return n[r]}.bind(null,o));return t},e.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(r,"a",r),r},e.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},e.p="",e(e.s=14)}([function(n,r,e){"use strict";n.exports=function(n){var r=[];return r.toString=function(){return this.map((function(r){var e=function(n,r){var e=n[1]||"",t=n[3];if(!t)return e;if(r&&"function"==typeof btoa){var o=(i=t,s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),d="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(d," */")),a=t.sources.map((function(n){return"/*# sourceURL=".concat(t.sourceRoot).concat(n," */")}));return[e].concat(a).concat([o]).join("\n")}var i,s,d;return[e].join("\n")}(r,n);return r[2]?"@media ".concat(r[2],"{").concat(e,"}"):e})).join("")},r.i=function(n,e){"string"==typeof n&&(n=[[null,n,""]]);for(var t={},o=0;o<this.length;o++){var a=this[o][0];null!=a&&(t[a]=!0)}for(var i=0;i<n.length;i++){var s=n[i];null!=s[0]&&t[s[0]]||(e&&!s[2]?s[2]=e:e&&(s[2]="(".concat(s[2],") and (").concat(e,")")),r.push(s))}},r}},function(n,r,e){"use strict";var t,o={},a=function(){return void 0===t&&(t=Boolean(window&&document&&document.all&&!window.atob)),t},i=function(){var n={};return function(r){if(void 0===n[r]){var e=document.querySelector(r);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(n){e=null}n[r]=e}return n[r]}}();function s(n,r){for(var e=[],t={},o=0;o<n.length;o++){var a=n[o],i=r.base?a[0]+r.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};t[i]?t[i].parts.push(s):e.push(t[i]={id:i,parts:[s]})}return e}function d(n,r){for(var e=0;e<n.length;e++){var t=n[e],a=o[t.id],i=0;if(a){for(a.refs++;i<a.parts.length;i++)a.parts[i](t.parts[i]);for(;i<t.parts.length;i++)a.parts.push(f(t.parts[i],r))}else{for(var s=[];i<t.parts.length;i++)s.push(f(t.parts[i],r));o[t.id]={id:t.id,refs:1,parts:s}}}}function l(n){var r=document.createElement("style");if(void 0===n.attributes.nonce){var t=e.nc;t&&(n.attributes.nonce=t)}if(Object.keys(n.attributes).forEach((function(e){r.setAttribute(e,n.attributes[e])})),"function"==typeof n.insert)n.insert(r);else{var o=i(n.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(r)}return r}var c,u=(c=[],function(n,r){return c[n]=r,c.filter(Boolean).join("\n")});function p(n,r,e,t){var o=e?"":t.css;if(n.styleSheet)n.styleSheet.cssText=u(r,o);else{var a=document.createTextNode(o),i=n.childNodes;i[r]&&n.removeChild(i[r]),i.length?n.insertBefore(a,i[r]):n.appendChild(a)}}function g(n,r,e){var t=e.css,o=e.media,a=e.sourceMap;if(o&&n.setAttribute("media",o),a&&btoa&&(t+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}var m=null,h=0;function f(n,r){var e,t,o;if(r.singleton){var a=h++;e=m||(m=l(r)),t=p.bind(null,e,a,!1),o=p.bind(null,e,a,!0)}else e=l(r),t=g.bind(null,e,r),o=function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)};return t(n),function(r){if(r){if(r.css===n.css&&r.media===n.media&&r.sourceMap===n.sourceMap)return;t(n=r)}else o()}}n.exports=function(n,r){(r=r||{}).attributes="object"==typeof r.attributes?r.attributes:{},r.singleton||"boolean"==typeof r.singleton||(r.singleton=a());var e=s(n,r);return d(e,r),function(n){for(var t=[],a=0;a<e.length;a++){var i=e[a],l=o[i.id];l&&(l.refs--,t.push(l))}n&&d(s(n,r),r);for(var c=0;c<t.length;c++){var u=t[c];if(0===u.refs){for(var p=0;p<u.parts.length;p++)u.parts[p]();delete o[u.id]}}}}},,,,,,,,,function(n,r,e){var t=e(11);"string"==typeof t&&(t=[[n.i,t,""]]);var o={insert:"head",singleton:!1};e(1)(t,o);t.locals&&(n.exports=t.locals)},function(n,r,e){(n.exports=e(0)(!1)).push([n.i,"body, html{\r\n\r\n    margin: 0px;\r\n    padding: 0px;\r\n}\r\n.grid{\r\n    display: grid;\r\n    height: 100%;\r\n    grid-template-columns: repeat(12, 1fr);\r\n    grid-template-rows: repeat(6, minmax(150px,auto));\r\n    padding: 0px;\r\n    margin: 0px;\r\n}\r\n.aside{\r\n    grid-column: 1 /  span 3;\r\n    grid-row: 1 / span 6;\r\n    border: solid 1px;\r\n    padding: 0px;\r\n    margin: 0px;\r\n    background-color: rgb(185, 185, 185);\r\n    color: whitesmoke;\r\n}\r\n.return{\r\n    display: block;\r\n    margin: 0px auto;\r\n    text-align: center;\r\n}\r\n.aside2{\r\n    grid-column: 1 /  span 3;\r\n    grid-row: 8 / span 6;\r\n    border: solid 1px;\r\n    background-color: rgb(150, 150, 150);\r\n    padding: 20% 5%;\r\n}\r\n\r\n.signupwindow{\r\n    position: absolute;\r\n    z-index: 3;\r\n    min-width: 100%;\r\n    min-height: 100%;\r\n    background-color: rgba(2, 2, 2, .95);\r\n    text-align: center;\r\n    vertical-align: top;\r\n}\r\n\r\n.signup{\r\n    position: relative;\r\n    width: 55%;\r\n    display: inline-block;\r\n    margin-top: 25%;  \r\n    background-color: white;\r\n}\r\n\r\n.signup span::after{\r\n    content: 'X';\r\n    display: inline-block;\r\n    position: absolute;\r\n    right: 5px;\r\n    top: 5px;\r\n}\r\n\r\n.signup input{\r\n    display: block;\r\n    width: 90%;\r\n    font-size: 1.5rem;\r\n    margin: 10px auto;\r\n}\r\n\r\n.logIn{\r\n    width: 55%;\r\n    display: inline-block;\r\n    margin: 10px auto;\r\n    background-color: white;\r\n}\r\n\r\n.logIn input:not([type=submit]){\r\n    width: 90%;\r\n    font-size: 1.0rem;\r\n    margin: 5px;\r\n}\r\n\r\n.logIn input[type=submit]{\r\n    width: 30%;\r\n    font-size: larger;\r\n    margin: 5px\r\n}\r\n\r\n.aside h1{\r\n    width: 50%;\r\n    margin: 50px auto;\r\n    font-size: 1.5rem;\r\n}\r\n.main{\r\n    position: relative;\r\n    grid-column: 4 / span 9;\r\n    grid-row: 1 / span 6;\r\n    justify-items: right;\r\n    align-items: bottom;\r\n    border: solid 1px;\r\n    padding: 10px 0px;\r\n    margin: 0px;\r\n    background-color: rgb(29, 89, 253, 0.1);\r\n}\r\n.rooms{\r\n    position:fixed;\r\n    top: 0px;\r\n    width: 100%;\r\n    margin: 0px;\r\n    top: 0px;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    z-index: 1;\r\n    background-color: whitesmoke;\r\n}\r\n.new-chat{\r\n    width: 100%;\r\n    text-align: center;\r\n    margin:  50px auto;\r\n    font-size: 0px;\r\n}\r\n#message{\r\n    width:100%;\r\n    display: block;\r\n}\r\n.new-chat div{\r\n    width: 90%;\r\n    display: inline-block;\r\n\r\n}\r\n\r\n.new-chat input{\r\n    font-size: 1.5rem;\r\n}\r\n\r\n.show-chat{\r\n    position: absolute;\r\n    bottom: 0px;\r\n    left: 0px;\r\n    list-style: none;\r\n    min-width: 100%;\r\n    height: 99%;\r\n    vertical-align: bottom;\r\n    padding: 10px 0px;\r\n    overflow-y: scroll;\r\n}\r\n\r\n.show-chat div{\r\n    margin: 1% auto;\r\n}\r\n.loginPage{\r\n    position: absolute;\r\n    z-index: 2;\r\n    min-width: 100%;\r\n    min-height: 100%;\r\n    background-color: white;\r\n    text-align: center;\r\n    vertical-align: top;\r\n}\r\n\r\n.loginBox{\r\n    margin: 10% 0px;\r\n}\r\n\r\n.logout{\r\n    display: block;\r\n    border: none;\r\n    border-radius: 15px;\r\n    margin: 0px auto;\r\n}\r\n.show{\r\n    display: block;\r\n}\r\n\r\n.hide{\r\n    display: none;\r\n}\r\n\r\n@media screen and (max-width: 775px) {\r\n    .grid{\r\n        display: grid;\r\n        height: 100%;\r\n        grid-template-columns: repeat(12, 1fr);\r\n        grid-template-rows: repeat(4, minmax(75px,auto));\r\n        padding: 0px;\r\n        margin: 0px;\r\n    }\r\n    .main{\r\n        position: relative;\r\n        grid-column: 1 / span 12;\r\n        grid-row: 1 / span 3;\r\n        overflow-y: scroll;\r\n        justify-items: right;\r\n        align-items: bottom;\r\n        border: solid 1px;\r\n        height: 250px;\r\n        padding: 10px 0px;\r\n        margin: 0px;\r\n        background-color: rgb(29, 89, 253, 0.1);\r\n    }\r\n    .aside{\r\n        grid-column: 1 /  span 12;\r\n        grid-row: 4 / span 1;\r\n        border: solid 1px;\r\n        padding: 0px;\r\n        margin: 0px;\r\n        background-color: rgb(47, 45, 167);\r\n        color: whitesmoke;\r\n    }\r\n    .show-chat{\r\n        position: relative;\r\n        bottom: 0px;\r\n        left: 0px;\r\n        list-style: none;\r\n        max-width: 100%;\r\n        height: 90%;\r\n        vertical-align: bottom;\r\n        padding: 10px 0px;\r\n    }\r\n}",""])},,,function(n,r,e){"use strict";e.r(r);e(10);const t=document.querySelector(".new-chat"),o=document.querySelector(".show-chat"),a=document.querySelector(".signup"),i=document.querySelector(".logIn"),s=document.querySelector(".loginPage"),d=new class{constructor(n,r){this.username=n,this.room=r,this.database=db.collection(this.room),this.dbRooms=db.collection("rooms")}signup(n,r){auth.createUserWithEmailAndPassword(n,r).then(n=>console.log(n.user))}addChat(n){console.log("in addchat");const r=new Date,e={username:this.username,room:this.room,message:n,created_at:firebase.firestore.Timestamp.fromDate(r)};this.database.add(e).then(()=>console.log(e))}updateChatWindow(n,r,e,t){var o,a,i,s;this.username===n.data().username?(o="rgb(255, 255, 255)",a="margin-left: 30%;",i="15px 0 0 15px",s="left"):(o="rgb(3, 0, 172, 0.2)",a="margin-right: 30%;",i="0px 15px 15px 0px",s="left");let d=`<div class="" style="background-color: ${o}; text-align: ${s}; border-radius: ${i}; ${a};" data-id="${n.id}">\n       <div>\n       <span class="username" style="font-weight: bold">${n.data().username}:</span>\n       <span class="message">${n.data().message}</span>\n       </div>\n       <span class="time" style="font-size:0.8rem display=block">${n.data().created_at.toDate().toString().slice(0,24)}</span>\n       <div>`;r.innerHTML+=d}}("anon","main"),l=(document.querySelector(".rooms"),document.querySelector(".msgsent")),c=document.querySelector(".logout"),u=document.querySelector(".new-user"),p=document.querySelector(".signupwindow");auth.onAuthStateChanged(n=>{n?(console.log("user is logged in: ",n.displayName),d.database.onSnapshot(n=>{n.docChanges().sort((n,r)=>n.doc.data().created_at.toDate()-r.doc.data().created_at.toDate()).forEach(n=>{"added"===n.type&&d.updateChatWindow(n.doc,o,"anon","main")})}),s.style.display="none"):(console.log("user logged out"),s.style.display="block")}),u.addEventListener("click",n=>{n.preventDefault(),console.log(n.target),console.log(a),p.classList.remove("hide")}),i.addEventListener("submit",n=>{n.preventDefault(),auth.signInWithEmailAndPassword(i.email.value,i.password.value).then(n=>console.log(n.displayName)),d.database.onSnapshot(n=>{n.docChanges().sort((n,r)=>n.doc.data().created_at.toDate()-r.doc.data().created_at.toDate()).forEach(n=>{"added"===n.type&&d.updateChatWindow(n.doc,o,"anon","main")})}),s.style.display="none"}),document.querySelector(".closewindow").addEventListener("click",n=>{console.log(n.target),p.classList.add("hide")}),a.addEventListener("submit",n=>{n.preventDefault(),d.signup(a.email.value,a.password.value).then(n=>n.displayName=a.username.value),d.database.onSnapshot(n=>{n.docChanges().sort((n,r)=>n.doc.data().created_at.toDate()-r.doc.data().created_at.toDate()).forEach(n=>{"added"===n.type&&d.updateChatWindow(n.doc,o,"anon","main")})}),s.style.display="none",p.classList.add("hide")}),t.addEventListener("submit",n=>{n.preventDefault();const r=t.message.value.trim();d.addChat(r),setTimeout(()=>{l.innerHTML="Message sent"},100),setTimeout(()=>{l.innerHTML=""},2e3),t.reset()}),c.addEventListener("click",n=>{n.preventDefault(),auth.signOut()})}]);