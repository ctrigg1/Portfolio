!function(n){var r={};function e(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return n[t].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=n,e.c=r,e.d=function(n,r,t){e.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:t})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,r){if(1&r&&(n=e(n)),8&r)return n;if(4&r&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(e.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&r&&"string"!=typeof n)for(var o in n)e.d(t,o,function(r){return n[r]}.bind(null,o));return t},e.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(r,"a",r),r},e.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},e.p="",e(e.s=14)}([function(n,r,e){"use strict";n.exports=function(n){var r=[];return r.toString=function(){return this.map((function(r){var e=function(n,r){var e=n[1]||"",t=n[3];if(!t)return e;if(r&&"function"==typeof btoa){var o=(a=t,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),i=t.sources.map((function(n){return"/*# sourceURL=".concat(t.sourceRoot).concat(n," */")}));return[e].concat(i).concat([o]).join("\n")}var a,s,l;return[e].join("\n")}(r,n);return r[2]?"@media ".concat(r[2],"{").concat(e,"}"):e})).join("")},r.i=function(n,e){"string"==typeof n&&(n=[[null,n,""]]);for(var t={},o=0;o<this.length;o++){var i=this[o][0];null!=i&&(t[i]=!0)}for(var a=0;a<n.length;a++){var s=n[a];null!=s[0]&&t[s[0]]||(e&&!s[2]?s[2]=e:e&&(s[2]="(".concat(s[2],") and (").concat(e,")")),r.push(s))}},r}},function(n,r,e){"use strict";var t,o={},i=function(){return void 0===t&&(t=Boolean(window&&document&&document.all&&!window.atob)),t},a=function(){var n={};return function(r){if(void 0===n[r]){var e=document.querySelector(r);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(n){e=null}n[r]=e}return n[r]}}();function s(n,r){for(var e=[],t={},o=0;o<n.length;o++){var i=n[o],a=r.base?i[0]+r.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};t[a]?t[a].parts.push(s):e.push(t[a]={id:a,parts:[s]})}return e}function l(n,r){for(var e=0;e<n.length;e++){var t=n[e],i=o[t.id],a=0;if(i){for(i.refs++;a<i.parts.length;a++)i.parts[a](t.parts[a]);for(;a<t.parts.length;a++)i.parts.push(f(t.parts[a],r))}else{for(var s=[];a<t.parts.length;a++)s.push(f(t.parts[a],r));o[t.id]={id:t.id,refs:1,parts:s}}}}function d(n){var r=document.createElement("style");if(void 0===n.attributes.nonce){var t=e.nc;t&&(n.attributes.nonce=t)}if(Object.keys(n.attributes).forEach((function(e){r.setAttribute(e,n.attributes[e])})),"function"==typeof n.insert)n.insert(r);else{var o=a(n.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(r)}return r}var c,u=(c=[],function(n,r){return c[n]=r,c.filter(Boolean).join("\n")});function p(n,r,e,t){var o=e?"":t.css;if(n.styleSheet)n.styleSheet.cssText=u(r,o);else{var i=document.createTextNode(o),a=n.childNodes;a[r]&&n.removeChild(a[r]),a.length?n.insertBefore(i,a[r]):n.appendChild(i)}}function g(n,r,e){var t=e.css,o=e.media,i=e.sourceMap;if(o&&n.setAttribute("media",o),i&&btoa&&(t+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}var m=null,h=0;function f(n,r){var e,t,o;if(r.singleton){var i=h++;e=m||(m=d(r)),t=p.bind(null,e,i,!1),o=p.bind(null,e,i,!0)}else e=d(r),t=g.bind(null,e,r),o=function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)};return t(n),function(r){if(r){if(r.css===n.css&&r.media===n.media&&r.sourceMap===n.sourceMap)return;t(n=r)}else o()}}n.exports=function(n,r){(r=r||{}).attributes="object"==typeof r.attributes?r.attributes:{},r.singleton||"boolean"==typeof r.singleton||(r.singleton=i());var e=s(n,r);return l(e,r),function(n){for(var t=[],i=0;i<e.length;i++){var a=e[i],d=o[a.id];d&&(d.refs--,t.push(d))}n&&l(s(n,r),r);for(var c=0;c<t.length;c++){var u=t[c];if(0===u.refs){for(var p=0;p<u.parts.length;p++)u.parts[p]();delete o[u.id]}}}}},,,,,,,,,function(n,r,e){var t=e(11);"string"==typeof t&&(t=[[n.i,t,""]]);var o={insert:"head",singleton:!1};e(1)(t,o);t.locals&&(n.exports=t.locals)},function(n,r,e){(n.exports=e(0)(!1)).push([n.i,"body, html{\r\n    height: 100%;\r\n    margin: 0px;\r\n    padding: 0px;\r\n}\r\n.grid{\r\n    display: grid;\r\n    height: 100%;\r\n    grid-template-columns: repeat(12, 1fr);\r\n    grid-template-rows: repeat(6, minmax(100px,auto));\r\n    padding: 0px;\r\n    margin: 0px;\r\n}\r\n.aside{\r\n    grid-column: 1 /  span 3;\r\n    grid-row: 1 / span 6;\r\n    border: solid 1px;\r\n    padding: 0px;\r\n    margin: 0px;\r\n    background-color: rgb(185, 185, 185);\r\n    color: whitesmoke;\r\n}\r\n.return{\r\n    display: block;\r\n    margin: 25px auto;\r\n    text-align: center;\r\n    text-decoration: none;\r\n    color: rgba(63, 63, 63, 0.95);\r\n}\r\n\r\n.signupwindow{\r\n    position: absolute;\r\n    z-index: 3;\r\n    min-width: 100%;\r\n    min-height: 100%;\r\n    background-color: rgba(2, 2, 2, .95);\r\n    text-align: center;\r\n    vertical-align: top;\r\n}\r\n\r\n.signup{\r\n    position: relative;\r\n    width: 55%;\r\n    display: inline-block;\r\n    margin-top: 25%;  \r\n    background-color: white;\r\n}\r\n\r\n.signup span::after{\r\n    content: 'X';\r\n    display: inline-block;\r\n    position: absolute;\r\n    right: 5px;\r\n    top: 5px;\r\n}\r\n\r\n.signup input{\r\n    display: block;\r\n    width: 90%;\r\n    font-size: 1.5rem;\r\n    margin: 10px auto;\r\n}\r\n\r\n\r\n\r\n.aside h1{\r\n    width: 50%;\r\n    margin: 50px auto;\r\n    font-size: 1.5rem;\r\n}\r\n.main{\r\n    position: relative;\r\n    grid-column: 4 / span 9;\r\n    grid-row: 1 / span 6;\r\n    justify-items: right;\r\n    align-items: bottom;\r\n    border: solid 1px;\r\n    padding: 10px 0px;\r\n    margin: 0px;\r\n    background-color: rgb(29, 89, 253, 0.1);\r\n}\r\n.chatrooms{\r\n    text-align: center;\r\n    min-height: 75%;\r\n    width: 100%;\r\n    margin: 0px;\r\n}\r\n.new-chat{\r\n    width: 100%;\r\n    text-align: center;\r\n    margin-top:  50px;\r\n    margin-bottom: 25px;\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n    font-size: 0px;\r\n}\r\n#message{\r\n    width:100%;\r\n    display: block;\r\n    font-size: 1.0rem;\r\n}\r\n.new-chat div{\r\n    width: 90%;\r\n    display: inline-block;\r\n}\r\n\r\n.new-chat input{\r\n    font-size: 1.5rem;\r\n}\r\n\r\n.msgsent{\r\n    text-align: center;\r\n    color: rgba(63, 63, 63, 0.95);\r\n}\r\n\r\n.show-chat{\r\n    position: absolute;\r\n    bottom: 0px;\r\n    left: 0px;\r\n    list-style: none;\r\n    min-width: 100%;\r\n    height: 99%;\r\n    vertical-align: bottom;\r\n    padding: 10px 0px;\r\n    overflow-y: scroll;\r\n}\r\n\r\n.show-chat div{\r\n    margin: 1% auto;\r\n}\r\n.loginPage{\r\n    position: absolute;\r\n    z-index: 2;\r\n    min-width: 100%;\r\n    min-height: 100%;\r\n    background-color: white;\r\n    vertical-align: top;\r\n}\r\n\r\n.loginBox{\r\n    margin: 10% 0px;\r\n    position: relative;\r\n    text-align: center;\r\n}\r\n\r\n.loginBox h1{\r\n    font-size: 1.5rem;\r\n}\r\n\r\n.logIn{\r\n    position: relative;\r\n    width: 40%;\r\n    display: inline-block;\r\n    background-color: white;\r\n}\r\n\r\n.logIn input:not([type=submit]){\r\n    width: 66%;\r\n    font-size: 1.3rem;\r\n    margin: 2% 5%;\r\n    border-radius: 5px;\r\n}\r\n\r\n.logIn input[type=submit]{\r\n    min-width: 33%;\r\n    display: block;\r\n    font-size: larger;\r\n    margin: 10px auto;\r\n    border-radius: 5px;\r\n}\r\n\r\n.logIn a{\r\n    display: inline-block;\r\n    margin: 10px auto;\r\n}\r\n\r\n.logout{\r\n    display: block;\r\n    max-width: 50%;\r\n    width: 100%;\r\n    min-height: 2em;\r\n    border-radius: 10px;\r\n    font-size: larger;\r\n    margin: 0px auto;\r\n}\r\n.show{\r\n    display: block;\r\n}\r\n\r\n.hide{\r\n    display: none;\r\n}\r\n\r\n@media screen and (max-width: 775px) {\r\n    .grid{\r\n        display: grid;\r\n        height: 100%;\r\n        grid-template-columns: repeat(12, 1fr);\r\n        grid-template-rows: repeat(4, minmax(75px,auto));\r\n        padding: 0px;\r\n        margin: 0px;\r\n    }\r\n    .main{\r\n        position: relative;\r\n        grid-column: 1 / span 12;\r\n        grid-row: 1 / span 3;\r\n        justify-items: right;\r\n        align-items: bottom;\r\n        border: solid 1px;\r\n        padding: 0px;\r\n        margin: 0px;\r\n        background-color: rgb(29, 89, 253, 0.1);\r\n    }\r\n    .aside{\r\n        grid-column: 1 /  span 12;\r\n        grid-row: 4 / span 1;\r\n        border: solid 1px;\r\n        padding: 0px;\r\n        margin: 0px;\r\n        background-color: rgb(185, 185, 185);\r\n        color: whitesmoke;\r\n    }\r\n    .show-chat{\r\n        position: relative;\r\n        padding: 0px;\r\n        bottom: 0px;\r\n        left: 0px;\r\n        list-style: none;\r\n        min-width: 100%;\r\n        height: 100%;\r\n    }\r\n\r\n    .logorreturn{\r\n        display: block;\r\n        max-width: 100%;\r\n    }\r\n    .logout{\r\n        display: inline-block;\r\n        width: 20%;\r\n        margin-right: 50%;\r\n        margin-left: 1%;\r\n        font-size: .8rem;\r\n    }\r\n    .return{\r\n        display: inline-block;\r\n        width: 25%;\r\n        margin: 0px;\r\n        text-align: right;\r\n        color: red;\r\n        font-size: .8rem;\r\n    }\r\n    .new-chat{\r\n        width: 100%;\r\n        text-align: center;\r\n        margin:  25px auto;\r\n        font-size: 0px;\r\n    }\r\n}",""])},,,function(n,r,e){"use strict";e.r(r);e(10);const t=document.querySelector(".new-chat"),o=document.querySelector(".show-chat"),i=document.querySelector(".signup"),a=document.querySelector(".logIn"),s=document.querySelector(".loginPage"),l=new class{constructor(n,r){this.username=n,this.room=r,this.database=db.collection(this.room),this.dbRooms=db.collection("rooms")}signup(n,r,e){auth.createUserWithEmailAndPassword(n,r).then(n=>{console.log(n.user),n.user.updateProfile({displayName:e}).then(()=>console.log(n.user.displayName))})}addChat(n){console.log("in addchat");const r=new Date,e={username:this.username,room:this.room,message:n,created_at:firebase.firestore.Timestamp.fromDate(r)};this.database.add(e).then(()=>console.log(e))}updateChatWindow(n,r,e,t){let o,i,a,s;this.username===n.data().username?(o="rgb(255, 255, 255)",i="margin-left: 30%;",a="15px 0 0 15px",s="left"):(o="rgb(3, 0, 172, 0.2)",i="margin-right: 30%;",a="0px 15px 15px 0px",s="left");let l=`<div class="" style="background-color: ${o}; text-align: ${s}; border-radius: ${a}; ${i};" data-id="${n.id}">\n       <div>\n       <span class="username" style="font-weight: bold">${n.data().username}:</span>\n       <span class="message">${n.data().message}</span>\n       </div>\n       <span class="time" style="font-size:0.8rem display=block">${n.data().created_at.toDate().toString().slice(0,24)}</span>\n       <div>`;r.innerHTML+=l}liveupdates(n){this.database.onSnapshot(r=>{console.log(r),r.docChanges().sort((n,r)=>n.doc.data().created_at.toDate()-r.doc.data().created_at.toDate()).forEach(r=>{"added"===r.type&&(this.updateChatWindow(r.doc,n,this.username,this.room),console.log("message added"))})})}}("anon","main"),d=document.querySelector(".rooms"),c=document.querySelector(".msgsent"),u=document.querySelector(".logout"),p=document.querySelector(".new-user"),g=document.querySelector(".signupwindow");auth.onAuthStateChanged(n=>{console.log(n),n?(console.log("user is logged in: ",auth.currentUser.displayName),l.username=auth.currentUser.displayName,l.liveupdates(o),s.style.display="none"):(console.log("user logged out"),s.style.display="block")}),p.addEventListener("click",n=>{n.preventDefault(),g.classList.remove("hide")}),a.addEventListener("submit",n=>{n.preventDefault(),auth.signInWithEmailAndPassword(a.email.value,a.password.value),s.style.display="none",a.reset()}),document.querySelector(".closewindow").addEventListener("click",n=>{g.classList.add("hide")}),i.addEventListener("submit",n=>{n.preventDefault(),l.signup(i.email.value,i.password.value,i.username.value),i.reset(),s.style.display="none",g.classList.add("hide")}),t.addEventListener("submit",n=>{n.preventDefault();const r=t.message.value.trim();l.addChat(r),setTimeout(()=>{c.innerHTML="Message sent"},100),setTimeout(()=>{c.innerHTML=""},2e3),t.reset()}),d.addEventListener("click",n=>{l.room=n.target.value,l.database=db.collection(l.room),console.log(l.room),console.log(l.database),o.innerHTML="",l.liveupdates(o)}),u.addEventListener("click",n=>{n.preventDefault(),auth.signOut().then(()=>{l.username="anon",l.room="main",l.liveupdates(o),window.location.reload(!1)})})}]);